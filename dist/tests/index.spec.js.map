{"version":3,"sources":["../../src/tests/index.spec.js"],"names":["global","describe","before","after","it","readFile","promisify","TEST_PORT","app","server","use","static","listen","done","close","config","fetch","baseURL","join","__dirname","originalHtml","transformedHtml","console","log"],"mappings":";;;;;;;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;;;cAPwCA,M;IAAhCC,Q,WAAAA,Q;IAAUC,M,WAAAA,M;IAAQC,K,WAAAA,K;IAAOC,E,WAAAA,E;;AAKjC,IAAMC,WAAW,eAAKC,SAAL,CAAe,aAAGD,QAAlB,CAAjB;;AAIA,IAAME,YAAY,IAAlB;;AAEAN,SAAS,eAAT,EAA0B,YAAM;AAC9B,MAAIO,MAAM,IAAV;AACA,MAAIC,SAAS,IAAb;AACAP,SAAO,gBAAQ;AACbM,UAAM,yBAAUE,GAAV,CAAc,kBAAQC,MAAR,CAAe,QAAf,CAAd,CAAN;AACAF,aAASD,IAAII,MAAJ,CAAWL,SAAX,EAAsBM,IAAtB,CAAT;AACD,GAHD;;AAKAV,QAAM;AAAA,WAAMM,OAAOK,KAAP,EAAN;AAAA,GAAN;;AAEAV,KAAG,kCAAH,6DAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BW,kBAD+B,GACtB;AACbC,qBAAO;AACLC,yBAAS;AADJ;AADM,aADsB;AAAA;AAAA,mBAMVZ,SACzB,eAAKa,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,WAA/B,CADyB,EAEzB,OAFyB,CANU;;AAAA;AAM/BC,wBAN+B;AAAA;AAAA,mBAUP,gBAAcA,YAAd,EAA4BL,MAA5B,CAVO;;AAAA;AAU/BM,2BAV+B;;AAWrCC,oBAAQC,GAAR,CAAY,EAAEF,gCAAF,EAAZ;;AAXqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;AAaD,CAvBD","file":"index.spec.js","sourcesContent":["const { describe, before, after, it } = global;\nimport express from 'express';\nimport fs from 'fs';\nimport path from 'path';\nimport util from 'util';\nconst readFile = util.promisify(fs.readFile);\n\nimport transformHtml from '../';\n\nconst TEST_PORT = 8080;\n\ndescribe('transformHtml', () => {\n  let app = null;\n  let server = null;\n  before(done => {\n    app = express().use(express.static('static'));\n    server = app.listen(TEST_PORT, done);\n  });\n\n  after(() => server.close());\n\n  it('should transform basic HTML file', async () => {\n    const config = {\n      fetch: {\n        baseURL: 'http://localhost:8080/static/',\n      },\n    };\n    const originalHtml = await readFile(\n      path.join(__dirname, 'static', 'test.html'),\n      'utf-8',\n    );\n    const transformedHtml = await transformHtml(originalHtml, config);\n    console.log({ transformedHtml });\n  });\n});\n"]}